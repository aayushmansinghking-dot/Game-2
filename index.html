<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ayushman Gaming</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

* { margin:0; padding:0; box-sizing:border-box; font-family:'Roboto', sans-serif;}
body { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; transition:background 3s; }

h1,h2,h3{text-align:center; margin-bottom:15px;}
.container { width:90%; max-width:900px; margin:auto; padding:20px; color:white; text-align:center;}

input[type="text"] { padding:10px; margin:5px; border-radius:5px; border:none; outline:none; width:200px; font-size:16px;}
select { padding:10px; margin:5px; border-radius:5px; border:none; font-size:16px;}
button { padding:10px 20px; margin:10px; font-size:16px; border:none; border-radius:10px; cursor:pointer; background:linear-gradient(45deg,#ff4b1f,#1fddff); color:#fff; transition:0.3s; box-shadow:0 0 10px rgba(255,255,255,0.5);}
button:hover { transform:scale(1.1); box-shadow:0 0 20px rgba(255,255,255,0.8);}
.hidden{ display:none; }
.player-box { margin:10px 0; }
.fade { animation: fadein 0.5s; }
@keyframes fadein { from{opacity:0;} to{opacity:1;} }

.result-box { display:flex; flex-wrap:wrap; justify-content:center; margin-top:20px;}
.card { background:#222; border-radius:15px; padding:15px; margin:10px; min-width:150px; text-align:center; box-shadow:0 0 20px rgba(0,255,255,0.3); transition: transform 0.3s;}
.card:hover { transform:scale(1.05);}
</style>
</head>
<body>

<!-- PAGE 1: Player Registration -->
<div id="page1" class="container fade">
<h1>üî•üî•Ayushman Gamingüî•üî•</h1>
<h2>Enter Player Names</h2>
<div id="playersContainer"></div>
<button id="playGameBtn" class="hidden">Play the Game</button>
</div>

<!-- PAGE 2: Safe/Imposter -->
<div id="page2" class="container hidden fade">
<h2 id="currentPlayerName"></h2>
<button id="confidentialBtn">Confidential</button>
<h3 id="resultDisplay"></h3>
<button id="nextPlayerBtn" class="hidden">Next Player</button>
</div>

<!-- PAGE 3: Questions -->
<div id="page3" class="container hidden fade">
<h2 id="questionPlayerName"></h2>
<div id="questionContainer">
<p id="questionText"></p>
<input type="text" id="answerInput" placeholder="Your answer">
<button id="nextQuestionBtn">Next</button>
</div>
</div>

<!-- PAGE 4: Voting -->
<div id="page4" class="container hidden fade">
<h1>Vote the Imposter</h1>
<div id="votingContainer"></div>
<button id="submitVoteBtn">Submit Votes</button>
</div>

<!-- PAGE 5: Voting Result -->
<div id="page5" class="container hidden fade">
<h1 id="votingResultText"></h1>
<div id="finalResult" class="result-box"></div>
</div>

<script>
// ---------------- SETTINGS ----------------
const characters = ["ANSH","SRISHTI","KHUSHI","ISHU","AARUSH","KUNDAN","AVISHA","DABLOO","RUDRA","DAKSH","PRIYAM","SIDDHI","GOPAL","PAKO","CHUNNU","NAND","PRATAP","SUNITA","BABY","PUNAM","DOLLY","SUDHA","TUNNI"];
let players = [];
let assignedCharacter = ""; 
let imposter = "";
let currentIndex = 0;
let questionIndex = 0;
const questions = [
"Your relation to the character?",
"Number of sons of the character?",
"Maximum age of the character?"
];
let questionAnswers = {};
let votes = {};

// --------------- BACKGROUND COLOR ANIMATION ---------------
const colors = ["#ff4b1f","#1fddff","#ffb347","#6a11cb","#ff4e50","#1fd1f9","#f7971e"];
let colorIndex = 0;
function animateBackground(){
    document.body.style.background = colors[colorIndex];
    colorIndex = (colorIndex +1) % colors.length;
    setTimeout(animateBackground,3000);
}
animateBackground();

// ---------------- PAGE 1: Player Registration ----------------
const playersContainer = document.getElementById('playersContainer');
const playGameBtn = document.getElementById('playGameBtn');

function addPlayerInput(){
    const div = document.createElement('div');
    div.classList.add('player-box');
    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = `Player ${playersContainer.children.length +1} Name`;
    input.addEventListener('input', ()=>{
        const inputs = Array.from(playersContainer.querySelectorAll('input'));
        const lastInput = inputs[inputs.length -1];
        if(lastInput.value.trim() !== ""){
            addPlayerInput();
        }
        togglePlayButton();
    });
    div.appendChild(input);
    playersContainer.appendChild(div);
}
function togglePlayButton(){
    const filled = Array.from(playersContainer.querySelectorAll('input')).filter(i=>i.value.trim()!=="");
    playGameBtn.classList.toggle('hidden', filled.length <2);
}
addPlayerInput();

playGameBtn.addEventListener('click', ()=>{
    players = Array.from(playersContainer.querySelectorAll('input')).map(i=>i.value.trim()).filter(n=>n!=="");
    assignImposterAndCharacter();
    showPage2();
});

// ---------------- PAGE 2: Safe / Imposter ----------------
const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const currentPlayerName = document.getElementById('currentPlayerName');
const confidentialBtn = document.getElementById('confidentialBtn');
const resultDisplay = document.getElementById('resultDisplay');
const nextPlayerBtn = document.getElementById('nextPlayerBtn');

function assignImposterAndCharacter(){
    const randIndex = Math.floor(Math.random()*players.length);
    imposter = players[randIndex];
    assignedCharacter = characters[Math.floor(Math.random()*characters.length)];
}

function showPage2(){
    page1.classList.add('hidden');
    page2.classList.remove('hidden');
    currentIndex=0;
    loadCurrentPlayer();
}

function loadCurrentPlayer(){
    const player = players[currentIndex];
    currentPlayerName.textContent = player;
    resultDisplay.textContent = "";
    confidentialBtn.classList.remove('hidden');
    nextPlayerBtn.classList.add('hidden');
}

confidentialBtn.addEventListener('click', ()=>{
    const player = players[currentIndex];
    if(player === imposter){
        resultDisplay.textContent = "Imposter ‚ùå";
    } else {
        resultDisplay.textContent = `Safe ‚úÖ - Character: ${assignedCharacter}`;
    }
    confidentialBtn.classList.add('hidden');
    nextPlayerBtn.classList.remove('hidden');
});

nextPlayerBtn.addEventListener('click', ()=>{
    currentIndex++;
    if(currentIndex<players.length){
        loadCurrentPlayer();
    } else {
        showPage3();
    }
});

// ---------------- PAGE 3: Questions ----------------
const page3 = document.getElementById('page3');
const questionPlayerName = document.getElementById('questionPlayerName');
const questionText = document.getElementById('questionText');
const answerInput = document.getElementById('answerInput');
const nextQuestionBtn = document.getElementById('nextQuestionBtn');

function showPage3(){
    page2.classList.add('hidden');
    page3.classList.remove('hidden');
    currentIndex = 0;
    questionIndex = 0;
    loadQuestion();
}

function loadQuestion(){
    const player = players[currentIndex];
    questionPlayerName.textContent = player;
    questionText.textContent = questions[questionIndex];
    answerInput.value = '';
}

nextQuestionBtn.addEventListener('click', ()=>{
    const player = players[currentIndex];
    if(!questionAnswers[player]) questionAnswers[player]=[];
    questionAnswers[player].push(answerInput.value.trim());
    questionIndex++;
    if(questionIndex<questions.length){
        loadQuestion();
    } else {
        questionIndex=0;
        currentIndex++;
        if(currentIndex<players.length){
            loadQuestion();
        } else {
            showPage4();
        }
    }
});

// ---------------- PAGE 4: Voting ----------------
const page4 = document.getElementById('page4');
const votingContainer = document.getElementById('votingContainer');
const submitVoteBtn = document.getElementById('submitVoteBtn');

function showPage4(){
    page3.classList.add('hidden');
    page4.classList.remove('hidden');
    votingContainer.innerHTML = "";
    players.forEach(p=>{
        const div = document.createElement('div');
        div.innerHTML = `<h3>${p}</h3><select id="vote_${p}">
            ${players.map(pl=>`<option value="${pl}">${pl}</option>`).join('')}
        </select>`;
        votingContainer.appendChild(div);
    });
}

submitVoteBtn.addEventListener('click', ()=>{
    votes = {};
    players.forEach(p=>{
        const selected = document.getElementById(`vote_${p}`).value;
        votes[selected] = (votes[selected]||0)+1;
    });
    showPage5();
});

// ---------------- PAGE 5: Voting Result ----------------
const page5 = document.getElementById('page5');
const votingResultText = document.getElementById('votingResultText');
const finalResult = document.getElementById('finalResult');

function showPage5(){
    page4.classList.add('hidden');
    page5.classList.remove('hidden');
    const maxVotes = Math.max(...Object.values(votes));
    const imposterVotes = votes[imposter]||0;
    if(Object.values(votes).filter(v=>v===maxVotes).length>1){
        votingResultText.textContent = "It's a Draw!";
    } else if(imposterVotes===maxVotes){
        votingResultText.textContent = "Imposter lost the game! You win!";
    } else {
        votingResultText.textContent = "Sorry, Imposter wins!";
    }
    finalResult.innerHTML = "";
    players.forEach(p=>{
        const div = document.createElement('div');
        div.classList.add('card');
        div.innerHTML = `<h3>${p}</h3><p>${p===imposter?'Imposter ‚ùå':'Safe ‚úÖ - Character: '+assignedCharacter}</p>`;
        finalResult.appendChild(div);
    });
}
</script>

</body>
</html>
